# FatigueData-AM2022 â†’ Upstash Redis ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

Î´ç†è«–æ¤œè¨¼ç”¨ã®ç–²åŠ´ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆFatigueData-AM2022ï¼‰ã‚’Upstash Redisã«æ ¼ç´ã™ã‚‹ãŸã‚ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹

| é …ç›® | å€¤ |
|------|-----|
| **åå‰** | FatigueData-AM2022 |
| **å†…å®¹** | ç©å±¤é€ å½¢åˆé‡‘ã®ç–²åŠ´ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |
| **è«–æ–‡DOI** | [10.1038/s41597-023-02150-x](https://doi.org/10.1038/s41597-023-02150-x) |
| **Figshare DOI** | [10.6084/m9.figshare.22337629](https://doi.org/10.6084/m9.figshare.22337629) |
| **ãƒ©ã‚¤ã‚»ãƒ³ã‚¹** | CC BY 4.0 |

### ãƒ‡ãƒ¼ã‚¿å†…å®¹

| ã‚¿ã‚¤ãƒ— | ãƒ‡ãƒ¼ã‚¿ç‚¹æ•° | èª¬æ˜ |
|--------|-----------|------|
| **S-N** | ~15,000 | å¿œåŠ›-å¯¿å‘½ãƒ‡ãƒ¼ã‚¿ï¼ˆÏƒ_a vs N_fï¼‰ |
| **Îµ-N** | ~1,800 | ã²ãšã¿-å¯¿å‘½ãƒ‡ãƒ¼ã‚¿ï¼ˆÎµ_a vs N_fï¼‰ |
| **da/dN** | ~1,470,000 | ãè£‚é€²å±•ãƒ‡ãƒ¼ã‚¿ï¼ˆda/dN vs Î”Kï¼‰ |

### ä¸»è¦ææ–™

| ææ–™ | æ§‹é€  | S-Nãƒ‡ãƒ¼ã‚¿æ•° | Ïƒ_yç¯„å›² [MPa] |
|------|------|------------|---------------|
| Ti-6Al-4V | HCP | ~5,400 | 514 - 1,213 |
| AlSi10Mg | FCC | ~1,800 | 115 - 319 |
| IN718 | FCC | ~1,800 | 420 - 1,379 |
| 316L | FCC | ~1,600 | 145 - 640 |

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. å…ƒãƒ‡ãƒ¼ã‚¿ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

```bash
# Figshareã‹ã‚‰ç›´æ¥ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆç´„67MBï¼‰
curl -L -o FatigueData-AM2022.json "https://ndownloader.figshare.com/files/41023481"
```

ã¾ãŸã¯ Figshare API çµŒç”±:

```bash
curl -s "https://api.figshare.com/v2/articles/22337629" | \
  python3 -c "import json,sys; d=json.load(sys.stdin); print(d['files'][0]['download_url'])"
```

### 2. Upstash Redis ã®æº–å‚™

1. [Upstash](https://upstash.com/) ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
2. æ–°ã—ã„ Redis ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ
3. `REST URL` ã¨ `REST Token` ã‚’ã‚³ãƒ”ãƒ¼

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
export UPSTASH_URL="https://your-redis-xxxxx.upstash.io"
export UPSTASH_TOKEN="AXxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
```

ã¾ãŸã¯ `.env` ãƒ•ã‚¡ã‚¤ãƒ«:

```bash
# .env
UPSTASH_URL=https://your-redis-xxxxx.upstash.io
UPSTASH_TOKEN=AXxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### 4. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install upstash-redis
```

### 5. ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Ÿè¡Œ

```bash
python upload_to_redis.py FatigueData-AM2022.json
```

å‡ºåŠ›ä¾‹:
```
ğŸ”Œ Connecting to Upstash Redis...
   âœ“ Connected!
ğŸ“‚ Loading FatigueData-AM2022.json...
   191 articles found
ğŸ“¤ Uploading to Upstash Redis...
   âœ“ fatigue:sn:Ti-6Al-4V (5438 points)
   âœ“ fatigue:sn:AlSi10Mg (1793 points)
   ...

============================================================
âœ… COMPLETE!
============================================================
   Materials:    116
   S-N points:   15,146
   Îµ-N points:   1,840
   da/dN points: 1,472,923
   TOTAL:        1,489,909
```

## ğŸ“¦ Redis ã‚­ãƒ¼æ§‹é€ 

```
fatigue:meta                    # ãƒ¡ã‚¿æƒ…å ±ï¼ˆJSONï¼‰
fatigue:materials               # ææ–™ã‚µãƒãƒªãƒ¼ä¸€è¦§ï¼ˆJSONï¼‰
fatigue:sn:<material_name>      # S-Nãƒ‡ãƒ¼ã‚¿ï¼ˆJSONé…åˆ—ï¼‰
fatigue:en:<material_name>      # Îµ-Nãƒ‡ãƒ¼ã‚¿ï¼ˆJSONé…åˆ—ï¼‰
fatigue:dadn:<material_name>    # da/dNãƒ‡ãƒ¼ã‚¿ï¼ˆJSONé…åˆ—ï¼‰
fatigue:dadn:<material_name>:N  # da/dNãƒ‡ãƒ¼ã‚¿ï¼ˆåˆ†å‰²æ™‚ï¼‰
```

### S-Nãƒ‡ãƒ¼ã‚¿å½¢å¼

```json
{
  "N": 14289,
  "S": 403.2,
  "runout": 0,
  "R": -1.0,
  "sigma_y": 926.0,
  "sigma_uts": 1020.0,
  "doi": "10.1016/j.ijfatigue.2020.105898"
}
```

## ğŸ” APIã§ã®åˆ©ç”¨

ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†å¾Œã¯ `fatigue_redis_api.py` ã§åˆ©ç”¨å¯èƒ½:

```python
from fatigue_redis_api import FatigueDB

db = FatigueDB()

# Î´ç†è«–æ¤œè¨¼ç”¨ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆr = Ïƒ_a / Ïƒ_y è¨ˆç®—æ¸ˆã¿ï¼‰
ti64 = db.get_sn_for_delta('Ti-6Al-4V', R=-1.0)
for d in ti64[:5]:
    print(f"N={d['N']:.0f}, S={d['S']:.1f} MPa, Ïƒ_y={d['sigma_y']:.1f} MPa, r={d['r']:.4f}")
```

## âš ï¸ æ³¨æ„äº‹é …

- Upstashç„¡æ–™æ : 10,000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ—¥ã€256MB
- da/dNãƒ‡ãƒ¼ã‚¿ãŒå¤§ãã„ãŸã‚ã€10MBåˆ¶é™ã‚’è¶…ãˆã‚‹ææ–™ã¯è‡ªå‹•åˆ†å‰²
- å…ƒãƒ‡ãƒ¼ã‚¿ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ï¼ˆCC BY 4.0ï¼‰ã«å¾“ã£ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨

## ğŸ“š å‚è€ƒæ–‡çŒ®

Peng, X., Wu, S., Qian, W. et al. The potency of defects on fatigue of additively manufactured metals. 
*Int J Mech Sci* **221**, 107185 (2022). https://doi.org/10.1016/j.ijmecsci.2022.107185


License: MIT
